{% extends "base.html" %}

<!-- prettier-ignore -->
{% block title %}select random note{% endblock title %}

<!-- prettier-ignore -->
{% block content %}
<div class="searchbox">
  <button id="random-button">random note</button>

  <div class="results">
    <p>press button to randomize!</p>
  </div>
</div>
<!-- prettier-ignore -->
{% endblock content %}

{% block scripts %}
<script type="text/javascript">
  // prettier-ignore
  var notes = {{ notes }}
  var index = "{{ index }}";
  // function shuffleArray(array) {
  //   var curId = array.length;
  //   // There remain elements to shuffle
  //   while (0 !== curId) {
  //     // Pick a remaining element
  //     var randId = Math.floor(Math.random() * curId);
  //     curId -= 1;
  //     // Swap it with the current element.
  //     var tmp = array[curId];
  //     array[curId] = array[randId];
  //     array[randId] = tmp;
  //   }
  //   return array;
  // }

  document.getElementsByTagName("button")[0].addEventListener("click", function () {
    var ids = Object.keys(notes).slice(0, 2);
    // ids = shuffleArray(ids);

    var result = "<ul>";
    for (var i = 0; i < ids.length; i++) {
      var id = ids[i];
      result += '<div><a href="/' + id + '.html"><h2>' + notes[id].title + "</h2></a><p>" + notes[id].contents + "</div>";
    }

    result += "</ul>"
    document.getElementsByTagName("div")[1].innerHTML = result;
  });
</script>
{% endblock scripts %}
